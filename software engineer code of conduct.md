# 软件工程师的行为守则

## 总结：
    1.编写目的
    2.数据的私有性和安全性
    3.软件开发流程（Github开发方式）
    4.版本号
    5.未完待续

### 编写目的
本文档旨在为在XYZ robotics新老软件工程师提供一个软件开发的统一的行为守则，
在任何情况下都必须严格遵守本行为准则。
违反此类行为被视为违反行为准则，其中个人和/或团体必须承担（法律）后果。


## 数据的私有性和安全性

### 机器/设备的用法与安全性
    1.您有责任保证您公司的个人电脑的安全。在未经允许下，没有任何理由可以有其他人使用你的电脑
    2.对于负责普通机器的人员（例如重新装订，1-4、4壁，卸垛），您不应将访问信息透露给任何未经授权的人。机器申请网址：​https://forms.gle/kLTcgJEKM2QRFbK66​
    3.对于分配了便携式硬盘的用户，谭彦男将对其进行数据加密，然后将访问密码发送给您。硬盘应保存在安全的地方放置（不在时将其放在开放的桌子上是一个不安全的示例）。不要与他人共享密码，但是如果有特殊情况，比如需要他人访问您的硬盘，则需要在允许他人访问之前递交一份正式申请。禁止将源代码存储在硬盘上。如有必要请使用ssh或git进行现场部署。
    4.您不应该存储任何源代码在您的个人计算机/存储设备上。请使用公司分配给您的PC，或在必要时申请使用工作用的笔记本电脑。

### 软件开发的安全性
    5.在工作的第一天，请使用您的公司电子邮件帐号注册一个GitHub帐户。也请使用您的个人简历照片作为github头像，方便所有人都可以认识你。内部不得使用个人电子邮件或个人GitHub帐户沟通、软件开发以及任何与工作有关的事项。
    6.您应该在你的公司Github帐户中启用双重身份验证（2FA），以便防止他人盗用或滥用您的帐户。您可以在自己的手机上安装Duopush，然后将恢复密码保存在安全的地方。无法启用2FA会造成您的账户被从组织中删除。
    7.请在xyzrobotics的Github组织下创建新的Github存储库（图1），而不要在你的个人或他人的存储库之下创建。创建的存储库应该始终是私有的而非公开的。故意或不这样做在XYZ Robotics公司里中无意中严重违反了隐私和安全政策，并且将面临严峻的后果。


## 软件开发流程（Github版）
主干原则：总是Github开发工作流程
这是每一个软件发开发者在Github工作流程中必读的。总的来说可以分为三个阶段：开发前期，开发中期，开发后期。一下是对于工作流程的一个总结：
    1.提交一个事物（issue）
    2.创建和开发一个分支（branch）
    3.打开一个拉去（pull）请求
    4.讨论和审核代码
    5.部署和测试代码
    6.合并（merge）到主干分支（master branch）中

### 开发前期阶段
* 原则一：总是在开发前创建一个事物
任何开发工作都必须始终由Github ISSUE发起，否则我们就没有了没有关于特定开发路线的目的的想法。问题是哪里可以建议新功能/任务，报告错误或提出一个话题进行讨论。一个公开的问题使您有机会在采取任何措施之前与其他人彻底讨论此问题为实现其目的而采取的行动。

* 原则二：一件事物只能记录一件事
问题应该是原子性的，只涉及与这一件事有关的方面。这样做的好处是当需要对现有的大型系统进行更改时，就会显示出原子问题。进行代码更改时，您希望进行的提交通常较小，并且仅包含一项不可简化的功能，修复或改进。 显然，原子提交需要从原子问题开始。如果有关事物的讨论超出了范围，请另外创建一个事物。

* 原则三：创建一个事物还不够，要创建一个好的
描述和澄清问题的程度直接影响问题可以解决的程度。含糊不清的描述或缺少关键信息会损害开发人员的理解能力，分析和解决问题。要创建一个好的事物，用最少的事物集首先解决：
    ·问题是什么？（描述问题和目的）
    ·您建议如何解决问题？（拟议方法）
    ·谁在何时交付何事？（负责任的里程碑）
您可以使用「git事物模板」来强制形式上的一致性，但是只要时间不长就不需要因为这些问题已经清楚地解决了。 您还可以将事物分配给其他相关人员，并用有意义的标签标记问题，以便于搜索和组织（图2）。

### 开发中期阶段
既然您已经确定了问题中要做的事情的清单，那么该开始开发了！

* 原则一：先提交，在完善
Github仅对您提交了的数据负责。如果您提交失败，然后出现意外状况，您可能会陷入麻烦。此外，定期检查点意味着您可以了解如何破坏某物。 所以不要让明天的美丽阻止您今天进行连续提交。 每次提交都应该是纯净的独立的。 一次或多次在多个地方进行多种更改（不止两个）提交是一种不良做法，应尽力避免。

* 原则二：良好的代码风格更便于交流
良好且规范的代码风格方便让你的代码更容易阅读，方便维护。最初我们在不同的框架中使用C++和Python，并且有很多关于这两种语言的编码风格的参考。我们遵循谷歌对于C++和Python的编码风格。请详细阅读！
https://google.github.io/styleguide/cppguide.html  
https://google.github.io/styleguide/pyguide.html
我们使用doxygen注释样式。配置您的IDE（例如vscode）用快捷键自动生成的帮助指令。
下面是在良好的编码风格的通用准则。
    1.好的代码是不言自明的–注释的需求应该最少。评论应该添加到需要解释的代码部分。
    2.如果没有必要，使用代码一不应该很聪明–做事明显简单的方法。当然，更高效的代码比更低效的代码好。
    3.通过以小单元组织代码来实现良好的代码组织（类/方法/函数）做一件事情，并且在这个过程中可以代码复用。
    4.好的代码只需很少的思考即可在短时间内被读懂。可以通过以下迭代来实现这一目标（前提是该代码可以运行）：重写，重命名，编辑和重构。
    5.使用自动化工具EARLY和OFTEN来实现编码样式的一致性。你可以把cpplint用于C++和把pylint用于python检查您的编码风格是否与Google相对。

* 原则三：让其他人知道你的代码逻辑
对于任何协作软件开发，几乎都不是您编写的代码只会由您自己访问。相反，您的代码将被其他开发人员、部署人员和最终用户读取，使用，修改和优化。作为友好的主人，您有责任邀请其他协作者和用户使用您创建的代码库。为此，您需要先告诉他们“这里是如何使用代码”，然后向他们显示“看，代码确实有效！”。

#### 首先，文档、文档还是文档。
始终以专业的方式记录您的代码库。有时不是你写的代码有多好或者你的代码解决的问题有多重要就足够了，因为如果文档不够完善，别人或许都不愿用它。XYZ大部分项目中的软件文档都是以github markdown形式的操作指南演示如何通过一系列步骤来使用软件。需要解决的关键问题是：
    1.能做什么？
    2.如何安装？
    3.如何使用？
    4.有哪些限制条件？
你可以参考公司的「README_TEMPLATE.md​」文档

#### 其次，测试、测试还是测试
「All code is guilty, until proven innocent.」
没有功能单元测试的代码库就像没有许可证的驱动程序。一个词概括就是危险的。单元测试是代码编写中不可或缺的一部分。单个单元/组件软件需要经过测试。如果没有好的测试，那么问题容易被忽视。从长远来看，问题代码可能危害整个代码库。单元测试服务于
    1.说明如何使用功能代码（以及哪些不应该使用）。
    2.增加对更改/维护代码的信心。如果每次都运行良好的单元测试任何代码被更改，我们将能够发现由于更改而引入的任何缺陷。
    3.鼓励代码设计的模块化。为了使单元测试成为可能，代码需要模块化，这也更易于复用代码。
作为开发人员设计单元测试时，单元测试框架使您更容易轻便的运行自动化单元测试。
    ·对于Python代码库，我们使用PyUnit框架。
    ·对于CPP代码库，我们使用GoogleTest（GTest）框架。
    ·如果您的开发需要ROS设置，请考虑使用ROSTest框架，该框架包装了GTest和PyUnit框架。

### 开发后期阶段
在准备好代码，文档和单元测试之后，您必须确保MASTER具有相同的感觉。

* 原则一：在拉动请求之前，始终与最新合并
在开发过程中，对隔夜分支的更改可能会同时发生。在这样的情况下，您必须：
    1.将每天的隔夜分支合并到您的开发分支中，并解决冲突（如果有）
    2.确保所有单元测试均通过，其他所有单元测试均通过
    3.提交拉取请求
 
* 原则二：始终在第一时间提交拉取请求
除修补程序外，拉取请求应始终首先提交给隔夜分支。在讨论隔夜分支之前，我们先来看一下构成良好牵引力的因素请求。拉取请求用于通知相关开发人员：
    1.该PR解决了什么问题？
    2.该PR如何解决该问题？
    3.该PR是否已通过单元测试？
您可以参考「PR_TEMPLATE」。
在大型系统/项目中，您的代码库只是大型系统的一部分。因此，当务之急是测试您的代码库与系统中其他组件的交互，以便：
    1.识别对系统的搭建和运行环境有哪些更改（例如，新的依赖项），以适应您的代码库的新更改。
    2.确保所有其他组件都通过了单元测试。
    3.确保所有系统测试（有关不同组件之间的交互的测试）通过。
这个隔夜分支在您的分支和主分支之间的中间分支执行，以实现上述3个目标。

新的PR进入隔夜分支或现有PR的新提交到隔夜分支在CI/CD中触发自动构建和测试计划（图3）（连续集成/连续部署）由软件管理团队设置的环境（咨询李永起，王刚，和Juekun Li帮助您建立CI/CD管道）。仅通过CI/CD测试的PR（图4）将能够合并到每晚。当然，在合并到隔夜分支之前，该守则也必须严格审查。

如果在部署过程中发现了严重的错误，可以将修补程序分支为解决问题而创建的请求请求可以直接提交到master分支。
 
* 原则三：始终严格执行代码审查
您应该至少任命另外两个开发人员来审查您的请求请求。首要的代码审查的目的是确保提高代码库的整体代码运行状况
随着时间的推移。以下是Google建议代码审查人员应注意的方面5。
    ·设计：代码是否经过精心设计并适合您的系统？
    ·功能性：功能是代码的方式？对其用户表现良好？
    ·复杂性：可以简化代码吗？另一个开发人员能够轻松将来会在使用它们时理解并使用该代码吗？
    ·测试：代码正确并且设计了一个好的自动化测试用例吗？
    ·命名：开发人员是否为变量、类、方法等选择了清晰的名称？
    ·评论：评论是否清楚有用？
    ·样式：代码是否遵循我们的样式指南？
    ·文档：开发人员是否也更新了相关文档？

* 原则四：始终在夜间进行压力测试
通过所有单元测试，CI/CD测试是必要的，但不足以声称您的分支机构会在真实系统中表现出预期的效果（在我们的实例中，通常是真实的机器人系统）。剩下的就是对真实系统中合并的隔夜分支进行压力测试。取决于原始拉取请求的目的，您需要定义相应的测试指标，以便我们可以评估每晚是否可以通过现实测试。要考虑的一些指标：
    1.改进或新功能是否达到了预期目的？报告密钥定量结果。例如，如果其目的是降低双重采摘率。你需要比较不带PR和带PR的系统性能，并报告统计。
    2.您的拉取请求如何影响整体系统性能？即使你的PR达到其预期目的，可能会以意想不到的方式影响整个系统。
确保包含PR不会降低这些组件的系统性能关键方面，例如周期时间，选择成功率等。
压力测试完成后，从隔夜的主分支提交另一个PR以供审核，其中包括PR消息中的压力测试报告。然后合并到master分支以最终解决该PR相关的问题。


## 约定

## 软件版本和标记
对于软件版本，我们遵循vA.B.C的约定，其中A在发行主要软件版本时递增，B在新功能发布时递增，C在修复BUG后递增。在部署期间的软件版本和其对应的github标签在开发期间在CI/CD管道中强制执行。


# 未完待续


